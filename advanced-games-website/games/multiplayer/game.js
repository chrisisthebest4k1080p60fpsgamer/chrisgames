const socket=io();const canvasMP=document.getElementById('gameCanvas');const ctxMP=canvasMP.getContext('2d');let players={},player={x:300,y:300,speed:5};socket.on('currentPlayers',data=>{players=data});socket.on('newPlayer',data=>{players[data.id]={x:data.x,y:data.y,color:data.color}});socket.on('playerMoved',data=>{if(players[data.id])players[data.id]=data});socket.on('playerDisconnected',id=>{delete players[id]});document.addEventListener('keydown',e=>{if(e.key==='ArrowUp')player.y-=player.speed;if(e.key==='ArrowDown')player.y+=player.speed;if(e.key==='ArrowLeft')player.x-=player.speed;if(e.key==='ArrowRight')player.x+=player.speed;socket.emit('playerMovement',{x:player.x,y:player.y});});function loopMP(){ctxMP.clearRect(0,0,canvasMP.width,canvasMP.height);for(let id in players){ctxMP.fillStyle=players[id].color||'#000';ctxMP.fillRect(players[id].x,players[id].y,30,30);}requestAnimationFrame(loopMP);}loopMP();