const express=require('express');const app=express();const http=require('http').createServer(app);const io=require('socket.io')(http);app.use(express.static('public'));let players={};io.on('connection',socket=>{console.log('a user connected: '+socket.id);players[socket.id]={x:100,y:100,color:'#'+Math.floor(Math.random()*16777215).toString(16)};socket.emit('currentPlayers',players);socket.broadcast.emit('newPlayer',{id:socket.id,...players[socket.id]});socket.on('playerMovement',data=>{players[socket.id].x=data.x;players[socket.id].y=data.y;socket.broadcast.emit('playerMoved',{id:socket.id,...players[socket.id]})});socket.on('disconnect',()=>{delete players[socket.id];io.emit('playerDisconnected',socket.id);});});http.listen(3000,()=>console.log('Server running on port 3000'));